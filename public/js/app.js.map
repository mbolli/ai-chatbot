{
  "version": 3,
  "sources": ["../../src/ts/main.ts"],
  "sourcesContent": ["/**\n * AI Chatbot - Main TypeScript entry point\n *\n * This file contains custom TypeScript code for the chatbot.\n * Datastar is loaded from CDN, so no import needed.\n */\n\n// Pyodide for client-side Python execution\nlet pyodide: unknown = null;\n\ndeclare const loadPyodide: () => Promise<{\n    runPythonAsync: (code: string) => Promise<unknown>;\n}>;\n\ninterface PythonResult {\n    success: boolean;\n    output?: unknown;\n    error?: string;\n}\n\n/**\n * Initialize Pyodide runtime (lazy-loaded)\n */\nasync function initPyodide(): Promise<typeof pyodide> {\n    if (!pyodide) {\n        try {\n            pyodide = await loadPyodide();\n        } catch (error) {\n            console.error('Failed to load Pyodide:', error);\n            throw error;\n        }\n    }\n    return pyodide;\n}\n\n/**\n * Execute Python code in the browser\n */\nasync function runPython(code: string): Promise<PythonResult> {\n    try {\n        const py = (await initPyodide()) as {\n            runPythonAsync: (code: string) => Promise<unknown>;\n        };\n        const result = await py.runPythonAsync(code);\n        return { success: true, output: result };\n    } catch (error) {\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : String(error),\n        };\n    }\n}\n\n// Expose to window for Datastar actions\ndeclare global {\n    interface Window {\n        runPythonCode: typeof runPython;\n        initPyodide: typeof initPyodide;\n    }\n}\n\nwindow.runPythonCode = runPython;\nwindow.initPyodide = initPyodide;\n\n/**\n * Auto-resize textarea to fit content\n */\nfunction autoResizeTextarea(textarea: HTMLTextAreaElement): void {\n    textarea.style.height = 'auto';\n    textarea.style.height = `${textarea.scrollHeight}px`;\n}\n\n// Setup auto-resize for message input\ndocument.addEventListener('DOMContentLoaded', () => {\n    const messageInput = document.querySelector<HTMLTextAreaElement>(\n        'textarea[data-signal=\"message\"]'\n    );\n    if (messageInput) {\n        messageInput.addEventListener('input', () =>\n            autoResizeTextarea(messageInput)\n        );\n    }\n});\n\n/**\n * Scroll to bottom of messages container\n */\nfunction scrollToBottom(selector: string): void {\n    const container = document.querySelector(selector);\n    if (container) {\n        container.scrollTop = container.scrollHeight;\n    }\n}\n\n// Expose scroll helper\n(window as unknown as { scrollToBottom: typeof scrollToBottom }).scrollToBottom =\n    scrollToBottom;\n\n/**\n * Copy text to clipboard\n */\nasync function copyToClipboard(text: string): Promise<boolean> {\n    try {\n        await navigator.clipboard.writeText(text);\n        return true;\n    } catch {\n        // Fallback for older browsers\n        const textarea = document.createElement('textarea');\n        textarea.value = text;\n        document.body.appendChild(textarea);\n        textarea.select();\n        const success = document.execCommand('copy');\n        document.body.removeChild(textarea);\n        return success;\n    }\n}\n\n// Expose copy helper\n(\n    window as unknown as { copyToClipboard: typeof copyToClipboard }\n).copyToClipboard = copyToClipboard;\n\n/**\n * Download a file with given content\n */\nfunction downloadFile(content: string, filename: string, mimeType: string): void {\n    const blob = new Blob([content], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n}\n\n/**\n * Download CSV content\n */\nfunction downloadCsv(content: string, filename: string): void {\n    downloadFile(content, filename, 'text/csv;charset=utf-8;');\n}\n\n/**\n * Download SVG content\n */\nfunction downloadSvg(content: string, filename: string): void {\n    downloadFile(content, filename, 'image/svg+xml');\n}\n\n/**\n * Download base64 image\n */\nfunction downloadBase64Image(dataUrl: string, filename: string): void {\n    const a = document.createElement('a');\n    a.href = dataUrl;\n    // Extract extension from dataUrl if possible\n    const match = dataUrl.match(/^data:image\\/(\\w+);/);\n    const ext = match ? match[1] : 'png';\n    a.download = `${filename}.${ext}`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n}\n\n// Expose download helpers\n(window as unknown as { \n    downloadCsv: typeof downloadCsv;\n    downloadSvg: typeof downloadSvg;\n    downloadBase64Image: typeof downloadBase64Image;\n}).downloadCsv = downloadCsv;\n(window as unknown as { downloadSvg: typeof downloadSvg }).downloadSvg = downloadSvg;\n(window as unknown as { downloadBase64Image: typeof downloadBase64Image }).downloadBase64Image = downloadBase64Image;\n\nconsole.log('AI Chatbot initialized');\n"],
  "mappings": "mBAQA,IAAIA,EAAmB,KAevB,eAAeC,GAAuC,CAClD,GAAI,CAACD,EACD,GAAI,CACAA,EAAU,MAAM,YAAY,CAChC,OAASE,EAAO,CACZ,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACV,CAEJ,OAAOF,CACX,CAKA,eAAeG,EAAUC,EAAqC,CAC1D,GAAI,CAKA,MAAO,CAAE,QAAS,GAAM,OADT,MAHH,MAAMH,EAAY,GAGN,eAAeG,CAAI,CACJ,CAC3C,OAASF,EAAO,CACZ,MAAO,CACH,QAAS,GACT,MAAOA,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,CAChE,CACJ,CACJ,CAUA,OAAO,cAAgBC,EACvB,OAAO,YAAcF,EAKrB,SAASI,EAAmBC,EAAqC,CAC7DA,EAAS,MAAM,OAAS,OACxBA,EAAS,MAAM,OAAS,GAAGA,EAAS,YAAY,IACpD,CAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAChD,IAAMC,EAAe,SAAS,cAC1B,iCACJ,EACIA,GACAA,EAAa,iBAAiB,QAAS,IACnCF,EAAmBE,CAAY,CACnC,CAER,CAAC,EAKD,SAASC,EAAeC,EAAwB,CAC5C,IAAMC,EAAY,SAAS,cAAcD,CAAQ,EAC7CC,IACAA,EAAU,UAAYA,EAAU,aAExC,CAGC,OAAgE,eAC7DF,EAKJ,eAAeG,EAAgBC,EAAgC,CAC3D,GAAI,CACA,aAAM,UAAU,UAAU,UAAUA,CAAI,EACjC,EACX,MAAQ,CAEJ,IAAMN,EAAW,SAAS,cAAc,UAAU,EAClDA,EAAS,MAAQM,EACjB,SAAS,KAAK,YAAYN,CAAQ,EAClCA,EAAS,OAAO,EAChB,IAAMO,EAAU,SAAS,YAAY,MAAM,EAC3C,gBAAS,KAAK,YAAYP,CAAQ,EAC3BO,CACX,CACJ,CAII,OACF,gBAAkBF,EAKpB,SAASG,EAAaC,EAAiBC,EAAkBC,EAAwB,CAC7E,IAAMC,EAAO,IAAI,KAAK,CAACH,CAAO,EAAG,CAAE,KAAME,CAAS,CAAC,EAC7CE,EAAM,IAAI,gBAAgBD,CAAI,EAC9BE,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOD,EACTC,EAAE,SAAWJ,EACb,SAAS,KAAK,YAAYI,CAAC,EAC3BA,EAAE,MAAM,EACR,SAAS,KAAK,YAAYA,CAAC,EAC3B,IAAI,gBAAgBD,CAAG,CAC3B,CAKA,SAASE,EAAYN,EAAiBC,EAAwB,CAC1DF,EAAaC,EAASC,EAAU,yBAAyB,CAC7D,CAKA,SAASM,EAAYP,EAAiBC,EAAwB,CAC1DF,EAAaC,EAASC,EAAU,eAAe,CACnD,CAKA,SAASO,EAAoBC,EAAiBR,EAAwB,CAClE,IAAMI,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOI,EAET,IAAMC,EAAQD,EAAQ,MAAM,qBAAqB,EAC3CE,EAAMD,EAAQA,EAAM,CAAC,EAAI,MAC/BL,EAAE,SAAW,GAAGJ,CAAQ,IAAIU,CAAG,GAC/B,SAAS,KAAK,YAAYN,CAAC,EAC3BA,EAAE,MAAM,EACR,SAAS,KAAK,YAAYA,CAAC,CAC/B,CAGC,OAIE,YAAcC,EAChB,OAA0D,YAAcC,EACxE,OAA0E,oBAAsBC,EAEjG,QAAQ,IAAI,wBAAwB",
  "names": ["pyodide", "initPyodide", "error", "runPython", "code", "autoResizeTextarea", "textarea", "messageInput", "scrollToBottom", "selector", "container", "copyToClipboard", "text", "success", "downloadFile", "content", "filename", "mimeType", "blob", "url", "a", "downloadCsv", "downloadSvg", "downloadBase64Image", "dataUrl", "match", "ext"]
}
